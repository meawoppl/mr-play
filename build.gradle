plugins {
    id "com.diffplug.gradle.spotless" version "3.23.0"
    id "org.jetbrains.intellij" version "0.4.8"
}

// Apply the java-library plugin to add support for Java Library
apply plugin: 'java-library'

// In this section you declare where to find the dependencies of your project
repositories {
    jcenter()
}

//sourceControl {
//    gitRepository("git@github.com:meawoppl/progressbar.git") {
//        producesModule("me.tongfei:progressbar")
//    }
//}

dependencies {
    // This dependency is exported to consumers, that is to say found on their compile classpath.
    api 'org.apache.commons:commons-math3:3.6.1'

    // This dependency is used internally, and not exposed to consumers on their own compile classpath.
    implementation 'com.google.guava:guava:23.0'

    // https://mvnrepository.com/artifact/org.apache.commons/commons-math3
    compile group: 'org.apache.commons', name: 'commons-math3', version: '3.6.1'

    // Patched in personal repo.  See settings.gradle
    implementation 'me.tongfei:progressbar:0.7.3'

    // https://mvnrepository.com/artifact/jgrapht/jgrapht
    implementation group: 'jgrapht', name: 'jgrapht', version: '0.7.3'

    // https://mvnrepository.com/artifact/org.assertj/assertj-core
    testCompile group: 'org.assertj', name: 'assertj-core', version: '3.12.2'
}

spotless {
    java {
        target 'src/**/*.java'
        googleJavaFormat('1.6')
        removeUnusedImports()
        replaceRegex 'Bug in google format javadoc: https://github.com/google/google-java-format/issues/254', '  \\* (<p>)+', '  * <p>'
    }
}

test {
    beforeTest { descriptor ->
        logger.lifecycle("Running test: ${descriptor}")
    }
}

apply plugin: 'org.jetbrains.intellij'
